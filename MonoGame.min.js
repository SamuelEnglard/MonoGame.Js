(function(){"use strict";function g(n,t,i,r,u,f){for(var o,s,e=0;e<f;e++)o=n[t+e],s=r[u+e],s.x=o.x*i.m11+o.y*i.m21+i.m41,s.y=o.x*i.m12+o.y*i.m22+i.m42,r[u+e]=s}function nt(n,t,i){var u,e,r,f;if(!this._game.isRunning)throw new Error("Cannot load Audio once game is running");for(u=document.createElement("audio"),u.autoplay=!1,u.controls=!1,u.loop=!1,e=0;e<n.length;e++)r=n[e],f=document.createElement("source"),f.src=r,r.substr(r.length-3,3)==="mp3"?f.type="audio/mpeg":r.substr(r.length-3,3)==="m4a"||r.substr(r.length-3,3)==="mp4"?f.type="audio/mp4":r.substr(r.length-3,3)==="webm"&&(f.type="audio/webm"),u.appendChild(f);return u.load(),u.oncanplay=function(){i._loaded=!0;for(var n in t._resources)if(t._resources.hasOwnProperty(n)&&!t._resources[n]._loaded)return;t._game._continueRun()},u}function it(n){n=n||event;o.scrollWheelValue=n.wheelDelta||n.wheelDeltaY||0}function rt(n){n=n||event;o.scrollWheelValue=n.detail*-40}function ut(n){n=n||event;o.scrollWheelValue=n.deltaY*-120;document.removeEventListener("mousewheel",it);document.removeEventListener("DOMMouseScroll",rt)}var r,l,w,y,p,i,e,f,n,t,h,c,b,tt,a,k,u,o,s,v,d;window.define!==undefined?(r={},window.define!==undefined&&window.define("Microsoft/XNA/Framework",r)):(window.Microsoft===undefined&&(window.Microsoft={}),window.Microsoft.Xna===undefined&&(window.Microsoft.Xna={}),window.Microsoft.Xna.Framework===undefined&&(window.Microsoft.Xna.Framework={}),r=window.Microsoft.Xna.Framework);r.Graphics===undefined&&(r.Graphics={});l=r.Graphics;r.Input===undefined&&(r.Input={});w=r.Input;r.Media===undefined&&(r.Media={});y=r.Media;p=new Date(-864e13);r.MathHelper={};i=r.MathHelper;i.E=Math.E;i.Log10E=.4342945;i.Log2E=1.442695;i.Pi=Math.PI;i.PiOver2=Math.PI/2;i.PiOver4=Math.PI/4;i.TwoPi=Math.PI*2;i.barycentric=function(n,t,i,r,u){return n+(t-n)*r+(i-n)*u};i.catmullRom=function(n,t,i,r,u){var f=u*u,e=f*u;return.5*(2*t+(i-n)*u+(2*n-5*t+4*i-r)*f+(3*t-n-3*i+r)*e)};i.clamp=function(n,t,i){return Math.max(t,Math.min(i,n))};i.distance=function(n,t){return Math.abs(n-t)};i.hermite=function(n,t,i,r,u){switch(u){case 0:return n;case 1:return i}var e=n,s=i,o=t,h=r,f=u,c=f*f*f,l=f*f;return(2*e-2*s+h+o)*c+(3*s-3*e-2*o-h)*l+o*f+e};i.lerp=function(n,t,i){return n+(t-n)*i};i.max=Math.max;i.min=Math.min;i.smoothStep=function(n,t,r){return i.hermite(n,0,t,0,i.clamp(r,0,1))};i.toDegrees=function(n){return n*57.295779513082323};i.toRadians=function(n){return n*.017453292519943295};i.iEEERemainder=function(n,t){return n-t*Math.round(n/t)};i.wrapAngle=function(n){return n=i.iEEERemainder(n,6.2831854820251465),n<=-3.14159274?n+=6.28318548:n>3.14159274&&(n-=6.28318548),n};i.isPowerOfTwo=function(n){return n>0&&(n&n-1)==0};r.Point=function(n,t){this.x=n;this.y=t};e=r.Point;e.zero=new e(0,0);e.prototype.add=function(n){return new e(this.x+n.x,this.y+n.y)};e.prototype.subtract=function(n){return new e(this.x-n.x,this.y-n.y)};e.prototype.mutliply=function(n){return new e(this.x*n.x,this.y*n.y)};e.prototype.divide=function(n){return new e(this.x/n.x,this.y/n.y)};e.prototype.equals=function(n){return n instanceof e&&this.x===n.x&&this.y===n.y};e.prototype.toString=function(){return"{x:"+this.x.toString()+" y:"+this.y.toString()+"}"};r.Rectangle=function(n,t,i,r){this.x=n;this.y=t;this.width=i;this.height=r};f=r.Rectangle;f.empty=new f(0,0,0,0);f.prototype.equals=function(n){return n instanceof f&&this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height};f.prototype.contains=function(){var n,t,i;return arguments.length===1?(n=arguments[0],n instanceof e)?this.x<=n.x&&n.x<this.x+this.width&&this.y<=n.y&&n.y<this.y+this.height:n instanceof f?this.x<=n.x&&n.x+n.width<=this.x+this.width&&this.y<=n.y&&n.y+n.height<=this.y+this.height:!1:(t=arguments[0],i=arguments[1],this.x<=t&&t<this.x+this.width&&this.y<=i&&i<this.y+this.height)};f.prototype.offset=function(){var n,t,i;arguments.length===1?(n=arguments[0],this.x=n.x,this.y=n.y):(t=arguments[0],i=arguments[1],this.x=t,this.y=i)};f.prototype.center=function(){return new e(this.x+this.width/2,this.y+this.height/2)};f.prototype.inflate=function(n,t){this.x-=n;this.y-=t;this.width+=n*2;this.height+=t*2};f.prototype.isEmpty=function(){return this.width===0&&this.height===0&&this.x===0&&this.y===0};f.prototype.toString=function(){return"{x:"+this.x+" y:"+this.y+" width:"+this.width+" height:"+this.height+"}"};f.prototype.intersects=function(n){return n.left()<this.right()&&this.left()<n.right()&&n.top()<this.bottom()&&this.top()<n.bottom()};f.union=function(n,t){var i=Math.min(n.x,t.x),r=Math.min(n.y,t.y);return new f(i,r,Math.max(n.right(),t.right())-i,Math.max(n.bottom(),t.bottom())-r)};f.prototype.left=function(){return this.x};f.prototype.right=function(){return this.x+this.width};f.prototype.top=function(){return this.y};f.prototype.bottom=function(){return this.y+this.height};r.Vector2=function(n,t){t===undefined&&(t=n);this.x=n;this.y=t};n=r.Vector2;n.zero=new n(0);n.unitVector=new n(1);n.unitXVector=new n(1,0);n.unitYVector=new n(0,1);n.prototype.negate=function(){return new n(this.x,this.y)};n.prototype.equals=function(t){return t instanceof n&&t.x===this.x&&t.y===this.y};n.prototype.add=function(t){return new n(this.x+t.x,this.y+t.y)};n.prototype.multiply=function(t){return typeof t=="number"?new n(this.x*t,this.y*t):new n(this.x*t.x,this.y*t.y)};n.prototype.divide=function(t){return typeof t=="number"?new n(this.x/t,this.y/t):new n(this.x/t.x,this.y/t.y)};n.distance=function(n,t){var i=n.x-t.x,r=n.y-t.y;return Math.sqrt(i*i+r*r)};n.distanceSquared=function(n,t){var i=n.x-t.x,r=n.y-t.y;return i*i+r*r};n.reflect=function(t,i){var r=new n(0,0),u=2*(t.x*i.x+t.y*i.y);return r.x=t.x-i.x*u,r.y=t.y-i.y*u,r};n.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};n.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y};n.max=function(t,i){return new n(t.x>i.x?t.x:i.x,t.y>i.y?t.y:i.y)};n.min=function(t,i){return new n(t.x<i.x?t.x:i.x,t.y<i.y?t.y:i.y)};n.prototype.normalize=function(){var n=1/Math.sqrt(this.x*this.x+this.y*this.y);this.x*=n;this.y*=n};n.barycentric=function(t,r,u,f,e){return new n(i.barycentric(t.x,r.x,u.x,f,e),i.barycentric(t.y,r.y,u.y,f,e))};n.catmullRom=function(t,r,u,f,e){return new n(i.catmullRom(t.x,r.x,u.x,f.x,e),i.catmullRom(t.y,r.y,u.y,f.y,e))};n.clamp=function(t,r,u){return new n(i.clamp(t.x,r.x,u.x),i.clamp(t.y,r.y,u.y))};n.lerp=function(t,r,u){return new n(i.lerp(t.x,r.x,u),i.lerp(t.y,r.y,u))};n.smoothStep=function(t,r,u){return new n(i.smoothStep(t.x,r.x,u),i.smoothStep(t.y,r.y,u))};n.transform=function(){switch(arguments.length){case 2:return new n(arguments[0].x*arguments[1].m11+arguments[0].y*arguments[1].m21+arguments[1].m41,arguments[0].x*arguments[1].m12+arguments[0].y*arguments[1].m22+arguments[1].m42);case 3:return g(arguments[0],0,arguments[1],arguments[2],0,arguments[0].length);case 6:return g(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}};n.transformNormal=function(t,i){return new n(t.x*i.m11+t.y*i.m21,t.x*i.m12+t.y*i.m22)};r.Matrix=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){this.m11=n;this.m12=t;this.m13=i;this.m14=r;this.m21=u;this.m22=f;this.m23=e;this.m24=o;this.m31=s;this.m32=h;this.m33=c;this.m34=l;this.m41=a;this.m42=v;this.m43=y;this.m44=p};t=r.Matrix;t.identity=new t(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);t.add=function(n,i){return new t(n.m11+i.m11,n.m12+i.m12,n.m13+i.m13,n.m14+i.m14,n.m21+i.m21,n.m22+i.m22,n.m23+i.m23,n.m24+i.m24,n.m31+i.m31,n.m32+i.m32,n.m33+i.m33,n.m34+i.m34,n.m41+i.m41,n.m42+i.m42,n.m43+i.m43,n.m44+i.m44)};t.createOrthographic=function(n,i,r,u){return new t(2/n,0,0,0,0,2/i,0,0,0,0,1/(r-u),0,0,0,r/(r-u),1)};t.createOrthographicOffCenter=function(n,i,r,u,f,e){return new t(2/(i-n),0,0,0,0,2/(u-r),0,0,0,0,1/(f-e),0,(n+i)/(n-i),(u+r)/(r-u),f/(f-e),1)};t.createPerspective=function(n,i,r,u){if(r<=0)throw new Error("nearPlaneDistance <= 0");if(u<=0)throw new Error("farPlaneDistance <= 0");if(r>=u)throw new Error("nearPlaneDistance >= farPlaneDistance");return new t(2*r/n,0,0,0,0,2*r/i,0,0,0,0,u/(r-u),-1,0,0,r*u/(r-u),0)};t.createPerspectiveFieldOfView=function(n,i,r,u){if(n<=0||n>=3.141593)throw new Error("fieldOfView <= 0 O >= PI");if(r<=0)throw new Error("nearPlaneDistance <= 0");if(u<=0)throw new Error("farPlaneDistance <= 0");if(r>=u)throw new Error("nearPlaneDistance >= farPlaneDistance");var f=1/Math.tan(n*.5),e=f/i;return new t(e,0,0,0,0,f,0,0,0,0,u/(r-u),-1,0,0,r*u/(r-u),0)};t.createPerspectiveOffCenter=function(n,i,r,u,f,e){if(f<=0)throw new Error("nearPlaneDistance <= 0");if(e<=0)throw new Error("farPlaneDistance <= 0");if(f>=e)throw new Error("nearPlaneDistance >= farPlaneDistance");return new t(2*f/(i-n),0,0,0,0,2*f/(u-r),0,0,(n+i)/(i-n),(u+r)/(u-r),e/(f-e),-1,0,0,f*e/(f-e),0)};t.createScale=function(){var n;if(arguments.length===1)return n=arguments[0],new t(n,0,0,0,0,n,0,0,0,0,n,0,0,0,0,1);var i=arguments[0],r=arguments[1],u=arguments[2];return new t(i,0,0,0,0,r,0,0,0,0,u,0,0,0,0,1)};t.createTranslation=function(n,i,r){return new t(1,0,0,0,0,1,0,0,0,0,1,0,n,i,r,1)};t.prototype.determinant=function(){var k=this.m11,d=this.m12,g=this.m13,nt=this.m14,n=this.m21,t=this.m22,i=this.m23,r=this.m24,u=this.m31,f=this.m32,e=this.m33,o=this.m34,s=this.m41,h=this.m42,c=this.m43,l=this.m44,a=e*l-o*c,v=f*l-o*h,y=f*c-e*h,p=u*l-o*s,w=u*c-e*s,b=u*h-f*s;return k*(t*a-i*v+r*y)-d*(n*a-i*p+r*w)+g*(n*v-t*p+r*b)-nt*(n*y-t*w+i*b)};t.divide=function(n,i){if(i instanceof t)return new t(n.m11/i.m11,n.m12/i.m12,n.m13/i.m13,n.m14/i.m14,n.m21/i.m21,n.m22/i.m22,n.m23/i.m23,n.m24/i.m24,n.m31/i.m31,n.m32/i.m32,n.m33/i.m33,n.m34/i.m34,n.m41/i.m41,n.m42/i.m42,n.m43/i.m43,n.m44/i.m44);var r=1/i;return new t(n.m11*r,n.m12*r,n.m13*r,n.m14*r,n.m21*r,n.m22*r,n.m23*r,n.m24*r,n.m31*r,n.m32*r,n.m33*r,n.m34*r,n.m41*r,n.m42*r,n.m43*r,n.m44*r)};t.prototype.equals=function(n){return n instanceof t?this.m11===n.m11&&this.m22===n.m22&&this.m33===n.m33&&this.m44===n.m44&&this.m12===n.m12&&this.m13===n.m13&&this.m14===n.m14&&this.m21===n.m21&&this.m23===n.m23&&this.m24===n.m24&&this.m31===n.m31&&this.m32===n.m32&&this.m34===n.m34&&this.m41===n.m41&&this.m42===n.m42&&this.m43===n.m43:!1};t.invert=function(n){var i=new t(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),u=n.m11,f=n.m12,e=n.m13,o=n.m14,s=n.m21,h=n.m22,c=n.m23,l=n.m24,a=n.m31,v=n.m32,y=n.m33,p=n.m34,w=n.m41,b=n.m42,k=n.m43,d=n.m44,g=y*d-p*k,nt=v*d-p*b,tt=v*k-y*b,it=a*d-p*w,rt=a*k-y*w,ut=a*b-v*w,ft=h*g-c*nt+l*tt,et=-(s*g-c*it+l*rt),ot=s*nt-h*it+l*ut,st=-(s*tt-h*rt+c*ut),r=1/(u*ft+f*et+e*ot+o*st);i.m11=ft*r;i.m21=et*r;i.m31=ot*r;i.m41=st*r;i.m12=-(f*g-e*nt+o*tt)*r;i.m22=(u*g-e*it+o*rt)*r;i.m32=-(u*nt-f*it+o*ut)*r;i.m42=(u*tt-f*rt+e*ut)*r;var ht=c*d-l*k,ct=h*d-l*b,lt=h*k-c*b,at=s*d-l*w,vt=s*k-c*w,yt=s*b-h*w;i.m13=(f*ht-e*ct+o*lt)*r;i.m23=-(u*ht-e*at+o*vt)*r;i.m33=(u*ct-f*at+o*yt)*r;i.m43=-(u*lt-f*vt+e*yt)*r;var pt=c*p-l*y,wt=h*p-l*v,bt=h*y-c*v,kt=s*p-l*a,dt=s*y-c*a,gt=s*v-h*a;i.m14=-(f*pt-e*wt+o*bt)*r;i.m24=(u*pt-e*kt+o*dt)*r;i.m34=-(u*wt-f*kt+o*gt)*r;i.m44=(u*bt-f*dt+e*gt)*r};t.lerp=function(n,i,r){return new t(n.m11+(i.m11-n.m11)*r,n.m12+(i.m12-n.m12)*r,n.m13+(i.m13-n.m13)*r,n.m14+(i.m14-n.m14)*r,n.m21+(i.m21-n.m21)*r,n.m22+(i.m22-n.m22)*r,n.m23+(i.m23-n.m23)*r,n.m24+(i.m24-n.m24)*r,n.m31+(i.m31-n.m31)*r,n.m32+(i.m32-n.m32)*r,n.m33+(i.m33-n.m33)*r,n.m34+(i.m34-n.m34)*r,n.m41+(i.m41-n.m41)*r,n.m42+(i.m42-n.m42)*r,n.m43+(i.m43-n.m43)*r,n.m44+(i.m44-n.m44)*r)};t.multiply=function(n,i){return i instanceof t?new t(n.m11*i.m11+n.m12*i.m21+n.m13*i.m31+n.m14*i.m41,n.m11*i.m12+n.m12*i.m22+n.m13*i.m32+n.m14*i.m42,n.m11*i.m13+n.m12*i.m23+n.m13*i.m33+n.m14*i.m43,n.m11*i.m14+n.m12*i.m24+n.m13*i.m34+n.m14*i.m44,n.m21*i.m11+n.m22*i.m21+n.m23*i.m31+n.m24*i.m41,n.m21*i.m12+n.m22*i.m22+n.m23*i.m32+n.m24*i.m42,n.m21*i.m13+n.m22*i.m23+n.m23*i.m33+n.m24*i.m43,n.m21*i.m14+n.m22*i.m24+n.m23*i.m34+n.m24*i.m44,n.m31*i.m11+n.m32*i.m21+n.m33*i.m31+n.m34*i.m41,n.m31*i.m12+n.m32*i.m22+n.m33*i.m32+n.m34*i.m42,n.m31*i.m13+n.m32*i.m23+n.m33*i.m33+n.m34*i.m43,n.m31*i.m14+n.m32*i.m24+n.m33*i.m34+n.m34*i.m44,n.m41*i.m11+n.m42*i.m21+n.m43*i.m31+n.m44*i.m41,n.m41*i.m12+n.m42*i.m22+n.m43*i.m32+n.m44*i.m42,n.m41*i.m13+n.m42*i.m23+n.m43*i.m33+n.m44*i.m43,n.m41*i.m14+n.m42*i.m24+n.m43*i.m34+n.m44*i.m44):new t(n.m11*i,n.m12*i,n.m13*i,n.m14*i,n.m21*i,n.m22*i,n.m23*i,n.m24*i,n.m31*i,n.m32*i,n.m33*i,n.m34*i,n.m41*i,n.m42*i,n.m43*i,n.m44*i)};t.negate=function(n){return new t(-n.m11,-n.m12,-n.m13,-n.m14,-n.m21,-n.m22,-n.m23,-n.m24,-n.m31,-n.m32,-n.m33,-n.m34,-n.m41,-n.m42,-n.m43,-n.m44)};t.prototype.toString=function(){return"{m11:"+this.m11+" m12:"+this.m12+" m13:"+this.m13+" m14:"+this.m14+"}{m21:"+this.m21+" m22:"+this.m22+" m23:"+this.m23+" m24:"+this.m24+"}{m31:"+this.m31+" m32:"+this.m32+" m33:"+this.m33+" m34:"+this.m34+"}{m41:"+this.m41+" m42:"+this.m42+" m43:"+this.m43+" m44:"+this.m44+"}"};r.Stopwatch=function(){this.isRunning=!1;this._startTime=p;this._lastTime=0};h=r.Stopwatch;h.prototype.elapsedMilliseconds=function(){if(!this.isRunning)return this._lastTime;if(this._startTime.getUTCMilliseconds()!==p.getMilliseconds()){var n=new Date;return n.valueOf()-this._startTime.valueOf()}return 0};h.prototype.start=function(){this._startTime.valueOf()===p.valueOf()&&(this._startTime=new Date);this.isRunning=!0};h.prototype.stop=function(){this._lastTime=this.elapsedMilliseconds();this.isRunning=!1};h.prototype.reset=function(){this.stop();this._lastTime=0;this._startTime=p};h.prototype.restart=function(){this.reset();this.start()};h.StartNew=function(){var n=new h;return n.start(),n};l.RenderTarget2D=function(){var n=document.createElement("canvas");this._context=n.getContext("2d")};r.ContentManager=function(n,t){this._context=n;this._resources={};this._game=t};c=r.ContentManager;c.prototype.loadTexture=function(n){var t,i,r;if(this._game.isRunning)throw new Error("Cannot load Texture once game is running");return this._resources[n]===undefined&&(t=new Image,t.src=n,i={width:t.width,height:t.height,_img:t,_loaded:!1},r=this,t.onload=function(){i.height=t.height;i.width=t.width;i._loaded=!0;for(var n in r._resources)if(r._resources.hasOwnProperty(n)&&!r._resources[n]._loaded)return;r._game._continueRun()},this._resources[n]=i),this._resources[n]};c.prototype.loadFont=function(t,i,r,u){var f,e,o;if(this._game.isRunning)throw new Error("Cannot load Font once game is running");return f="",r&&(f+="bold "),u&&(f+="italic"),f+=i+" "+t,e={_font:f},o=this,e.measureString=function(t){return new n(o._context.measureString(t).width,parseInt(i,10))},e};c.prototype.loadSoundEffect=function(n){if(this._game.isRunning)throw new Error("Cannot load Sound Effect once game is running");if(typeof n=="string"&&(n=[n]),this._resources[n]===undefined){var t={getDurationMilliseconds:function(){var n=this._audio.duration;return(n!==n&&(n=0),!isFinite(n))?n:n*1e3},play:function(){this._audio.play()}},i=nt(n,this,t);t._audio=i;t._loaded=!1;this._resources[n]=t}return this._resources[n]};c.prototype.loadSong=function(n){if(this._game.isRunning)throw new Error("Cannot load Song once game is running");if(typeof n=="string"&&(n=[n]),this._resources[n]===undefined){var t={getDurationMilliseconds:function(){var n=this._audio.duration;return(n!==n&&(n=0),!isFinite(n))?n:n*1e3}},i=nt(n,this,t);t._audio=i;t._loaded=!1;this._resources[n]=t}return this._resources[n]};c.prototype.loadVideo=function(n){var t,e,i,u,r,f;if(this._game.isRunning)throw new Error("Cannot load Video once game is running");if(typeof n=="string"&&(n=[n]),this._resources[n]===undefined){for(t=document.createElement("video"),t.autoplay=!1,t.controls=!1,t.loop=!1,e=0;e<n.length;e++)i=n[e],u=document.createElement("source"),u.src=i,i.substr(i.length-3,3)==="m4v"||i.substr(i.length-3,3)==="mp4"?u.type="video/mp4":i.substr(i.length-3,3)==="webm"&&(u.type="vide/webm"),t.appendChild(u);t.load();r={getDurationMilliseconds:function(){var n=this._video.duration;return(n!==n&&(n=0),!isFinite(n))?n:n*1e3},_video:t,_loaded:!1,width:0,height:0};f=this;t.oncanplay=function(){r._loaded=!0;r.height=r._video.height;r.width=r._video.width;for(var n in f._resources)if(f._resources.hasOwnProperty(n)&&!f._resources[n]._loaded)return;f._game._continueRun()};this._resources[n]=r}return this._resources[n]};l.GraphicsDevice=function(n,t){var i=t.getBoundingClientRect();this._manager=n;this._currentDraw=n._game._display;this.viewport={x:i.left,y:i.top,width:i.right-i.left,height:i.bottom-i.top}};b=l.GraphicsDevice;b.prototype.clear=function(){this._currentDraw.clearRect(0,0,this._currentDraw.canvas.width,this._currentDraw.canvas.height)};b.prototype.setRenderTarget=function(n){this._currentDraw=n===null?this._manager._game._display:n};r.GraphicsDeviceManager=function(n,t){this._game=n;this.graphicsDevice=new b(this,t)};tt=r.GraphicsDeviceManager;l.SpriteBatch=function(n){this._graphicsDevice=n;this._drawing=!1};a=l.SpriteBatch;a.prototype.begin=function(){this._drawing=!0;this._graphicsDevice._currentDraw.save()};a.prototype.end=function(){this._drawing=!1;this._graphicsDevice._currentDraw.restore()};a.prototype.draw=function(t,i,r,u,e){if(!this._drawing)throw new Error("Cannot be called till after begin is called");r=r||new f(0,0,t.width,t.height);e=e||new n(1);e instanceof n||(e=new n(e));i instanceof n?i=new f(i.x,i.y,r.width*e.x,r.height*e.y):i instanceof f||(i=new f(0,0,t.width*e.x,t.height*e.y));u=u||0;this._graphicsDevice._currentDraw.save();this._graphicsDevice._currentDraw.rotate(u);this._graphicsDevice._currentDraw.scale(e.x,e.y);this._graphicsDevice._currentDraw.drawImage(t._img||t._context,r.x,r.y,r.width,r.height,i.x,i.y,i.width,i.height);this._graphicsDevice._currentDraw.restore()};a.prototype.drawString=function(t,i,r,u,f,e){if(!this._drawing)throw new Error("Cannot be called till after begin is called");i=i.toString();e=e||new n(1);e instanceof n||(e=new n(e));this._graphicsDevice._currentDraw.save();this._graphicsDevice._currentDraw.rotate(f);this._graphicsDevice._currentDraw.scale(e.x,e.y);this._graphicsDevice._currentDraw.textAlign="left";this._graphicsDevice._currentDraw.textBaseline="top";this._graphicsDevice._currentDraw.font=t._font;this._graphicsDevice._currentDraw.fillStyle=u;this._graphicsDevice._currentDraw.fillText(i,r.x,r.y);this._graphicsDevice._currentDraw.restore()};k=500;r.Game=function(){};u=r.Game;u.createGame=function(n){function t(){this.isFixedTimeStep=!0;this.targetElapsedMilliseconds=100;this._gameTime={totalGameMilliseconds:0,elapsedGameMilliseconds:0,isRunningSlowly:!1};this._gameTimer=null;this._suppressDraw=!1;this._accumulatedElapsedMilliseconds=0;this._timerId=null;this._isExited=!1;this._previousMilliseconds=0;this._updateFrameLag=0;this.isRunning=!1;n.call(this)}return t.prototype=new u,t};u.prototype.initialize=function(){};u.prototype.base_initialize=function(){u.prototype.initialize.call(this)};u.prototype.loadContent=function(){};u.prototype.base_loadContent=function(){u.prototype.loadContent.call(this)};u.prototype.contentLoaded=function(){};u.prototype.base_contentLoaded=function(){u.prototype.contentLoaded.call(this)};u.prototype.resetElapsedMilliseconds=function(){this._gameTimer.restart();this._gameTime.elapsedGameMilliseconds=0;this._accumulatedElapsedMilliseconds=0;this._previousMilliseconds=0};u.prototype._tick=function(){var i,r,n,t;if(!this._isExited){if(i=this._gameTimer.elapsedMilliseconds(),this._accumulatedElapsedMilliseconds+=i-this._previousMilliseconds,this._previousMilliseconds=i,this.isFixedTimeStep&&this._accumulatedElapsedMilliseconds<this.targetElapsedMilliseconds){window.clearInterval(this._timerId);r=this.targetElapsedMilliseconds-this._accumulatedElapsedMilliseconds;n=this;window.setTimeout(function(){n._tick.call(n);n._timerId=window.setInterval(function(){n._tick()},n.targetElapsedMilliseconds)},r);return}if(this._accumulatedElapsedMilliseconds>k&&(this._accumulatedElapsedMilliseconds=k),this.isFixedTimeStep){for(this._gameTime.elapsedGameMilliseconds=this.targetElapsedMilliseconds,t=0;this._accumulatedElapsedMilliseconds>=this.targetElapsedMilliseconds;)if(this._gameTime.totalGameMilliseconds+=this.targetElapsedMilliseconds,this._accumulatedElapsedMilliseconds-=this.targetElapsedMilliseconds,++t,this.update(this._gameTime),this._isExited)return;this._updateFrameLag+=Math.max(0,t-1);this._gameTime.isRunningSlowly?this._updateFrameLag===0&&(this._gameTime.isRunningSlowly=!1):this._updateFrameLag>=5&&(this._gameTime.isRunningSlowly=!0);t===1&&this._updateFrameLag>0&&this._updateFrameLag--;this._gameTime.elapsedGameMilliseconds=this.targetElapsedMilliseconds*t}else if(this._gameTime.elapsedGameMilliseconds=this._accumulatedElapsedMilliseconds,this._gameTime.totalGameMilliseconds+=this._accumulatedElapsedMilliseconds,this._accumulatedElapsedMilliseconds=0,this._gameTime.isRunningSlowly=!1,this.update(this._gameTime),this._isExited)return;this._suppressDraw?this._suppressDraw=!1:this.draw(this._gameTime)}};u.prototype.run=function(n){this._display===undefined&&(this._display=n,this.content=new c(n,this),this.graphics=new tt(this,n.canvas),this.spriteBatch=new a(this.graphics.graphicsDevice));this._gameTimer=h.StartNew();this.graphics.graphicsDevice.setRenderTarget(null);this.initialize();this.loadContent();for(var t in this.content._resources)if(this.content._resources.hasOwnProperty(t)&&!this.content._resources[t]._loaded)return;this._continueRun()};u.prototype._continueRun=function(){this.contentLoaded();this.isRunning=!0;this.resetElapsedMilliseconds();this._isExited=!1;var n=this;this._timerId=window.setInterval(function(){n._tick()},this.targetElapsedMilliseconds)};u.prototype.suppressDraw=function(){this._suppressDraw=!0};u.prototype.update=function(){};u.prototype.base_update=function(n){u.prototype.update.call(this,n)};u.prototype.draw=function(){};u.prototype.base_draw=function(n){u.prototype.draw.call(this,n)};u.prototype.unloadConent=function(){};u.prototype.base_unloadContent=function(){u.prototype.unloadConent.call(this)};u.prototype.exit=function(){window.clearInterval(this._timerId);this.graphics.graphicsDevice.clear();this.unloadConent();this._isExited=!0;this.isRunning=!1};u.prototype.base_exit=function(){u.prototype.exit.call(this)};o={x:0,y:0,leftButton:!1,middleButton:!1,rightButton:!1,scrollWheelValue:0,xButton1:!1,xButton2:!1};w.Mouse={getState:function(){var t={};for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n]);return t}};document.addEventListener("mousemove",function(n){n=n||event;o.x=n.clientX;o.y=n.clientY});document.addEventListener("mousewheel",it);document.addEventListener("DOMMouseScroll",rt);document.addEventListener("wheel",ut);document.addEventListener("mousedown",function(n){n=n||event;switch(n.button){case 0:o.leftButton=!0;break;case 1:o.middleButton=!0;break;case 2:o.rightButton=!0}});document.addEventListener("mouseup",function(n){n=n||event;switch(n.button){case 0:o.leftButton=!1;break;case 1:o.middleButton=!1;break;case 2:o.rightButton=!1}});s={downKeys:[],addKey:function(n){for(var i=0,r=this.downKeys.length-1,t;i<=r;)if(t=Math.floor((i+r)/2),this.downKeys[t]<n)i=t+1;else if(this.downKeys[t]>n)r=t-1;else return;this.downKeys.splice(i,0,n)},removeKey:function(n){for(var i=0,r=this.downKeys.length-1,t;i<=r;)if(t=Math.floor((i+r)/2),this.downKeys[t]<n)i=t+1;else if(this.downKeys[t]>n)r=t-1;else{this.downKeys.splice(t,1);return}}};w.Keyboard={getState:function(){return{downKeys:s.downKeys.slice(0,s.downKeys.length),isKeyDown:function(n){for(var i=0,r=this.downKeys.length-1,t;i<=r;)if(t=Math.floor((i+r)/2),this.downKeys[t]<n)i=t+1;else if(this.downKeys[t]>n)r=t-1;else return!0;return!1},isKeyUp:function(n){return!this.isKeyDown(n)}}}};document.addEventListener("keydown",function(n){n=n||event;n.keyCode===16||n.shiftKey?s.addKey(16):n.keyCode===17||n.ctrlKey?s.addKey(17):(n.keyCode===18||n.altKey)&&s.addKey(18);n.keyCode!==16&&n.keyCode!==17&&n.keyCode!==18&&s.addKey(n.keyCode)});document.addEventListener("keyup",function(n){n=n||event;n.keyCode===16||n.shiftKey?s.removeKey(16):n.keyCode===17||n.ctrlKey?s.removeKey(17):(n.keyCode===18||n.altKey)&&s.removeKey(18);n.keyCode!==16&&n.keyCode!==17&&n.keyCode!==18&&s.removeKey(n.keyCode)});w.Keys={Backspace:8,Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,Pause:19,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Delete:46,Zero:48,One:49,Two:50,Three:51,Four:52,Five:53,Six:54,Seven:55,Eight:56,Nine:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NumPadZero:96,NumPadOne:97,NumPadTwo:98,NumPadThree:99,NumPadFour:100,NumPadFive:101,NumPadSix:102,NumPadSeven:103,NumPadEight:104,NumPadNine:105,Multiply:106,Add:107,Subtract:109,Decimal:110,Divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,OpenSquareBracket:219,CloseSquareBracket:221,Backslash:220,Forwardslash:191,Comma:188,Period:190,GraveAccent:192,SingleQuote:222};y.MediaState={Paused:1,Playing:2,Stopped:3};v=y.MediaState;y.MediaPlayer={play:function(n){this._song=n;this._song._audio.play();this.state=v.Playing},isMuted:function(n){if(this._song===null)return!1;if(n===undefined)return this._song._audio.muted;this._song._audio.muted=n},isRepeating:function(n){if(this._song===null)return!1;if(n===undefined)return this._song._audio.loop;this._song._audio.loop=n},volume:function(n){if(this._song===null)return!1;if(n===undefined)return this._song._audio.volume;this._song._audio.volume=n},resume:function(){this._song!==null&&(this._song._audio.play(),this.state=v.Playing)},pause:function(){this._song!==null&&(this._song._audio.pause(),this.state=v.Paused)},stop:function(){this._song!==null&&(this._song._audio.pause(),this._song._audio.currentTime=0,this._song._audio.pause(),this.state=v.Stopped)}};d=y.MediaPlayer;d._song=null;d.state=v.Stopped})();
//# sourceMappingURL=MonoGame.min.js.map
